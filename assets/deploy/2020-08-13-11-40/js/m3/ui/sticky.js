depend(["m3/core/debounce","m3/ui/rollingwindow"],function(p,l){var d={x:window.pageXOffset,y:window.pageYOffset,dir:void 0},h=window.innerheight,m=[],v=function(b,e,k,t){this.clear=0;this.status="grounded";this.getElement=function(){return b};this.getContext=function(){return k};this.getDirection=function(){return t||"top"};this.update=function(c,f){var a=this.getContext().getElement().getBoundaries(),g=this.getElement().getBoundaries();if(void 0===a.intersection(c))return this.reset();if(a.contains(c)&&
g.contains(c))return this.ground();if(a.contains(c))return g.height()>c.height()?this.pin("up"===f?"top":"bottom"):this.pin(this.getDirection());if(c.contains(a))return this.reset();if(a.above(c)){if("top"===this.getDirection())return g.height()>a.intersection(c).height()?this.latch("bottom"):this.pin("top");if("bottom"===this.getDirection())return this.latch("bottom")}if(a.below(c)){if("top"===this.getDirection())return this.latch("top");if("bottom"===this.getDirection())return g.height()>a.intersection(c).height()?
this.latch("top"):this.pin("bottom")}};this.pin=function(c){if(this.status!=="pinned."+c){this.status="pinned."+c;var f=e.getHTML(),a=this.getElement().getHTML(),g=a.getBoundingClientRect(),u=f.getBoundingClientRect();f.style.height=g.height+"px";a.style=null;a.style.position="fixed";a.style.width=u.width+"px";"top"===c&&(a.style.top="0px");"bottom"===c&&(a.style.bottom="0px")}};this.latch=function(c){if(this.status!=="latch."+c){this.status="latch."+c;var f=e.getHTML(),a=this.getElement().getHTML(),
g=a.getBoundingClientRect();a.style=null;f.style.height=g.height+"px";a.style.width=g.width+"px";a.style.zIndex=5;"top"===c&&(a.style.position="absolute",a.style.top=k.getElement().getBoundaries().a+"px");"bottom"===c&&(a.style.position="absolute",a.style.top=k.getElement().getBoundaries().b-g.height+"px")}};this.ground=function(){if("grounded"!==this.status){this.status="grounded";var c=e.getHTML(),f=this.getElement().getHTML(),a=f.getBoundingClientRect();f.style=null;c.style.height=a.height+"px";
f.style.position="absolute";f.style.top=a.top+d.y+"px";f.style.width=a.width+"px";f.style.zIndex=5}};this.reset=function(){if("grounded"!==this.status){this.status="grounded";var c=e.getHTML();this.getElement().getHTML().style=null;c.style=null}};m.push(this)},w=function(b){this.getElement=function(){return b};this.registered=[]},n=function(b){this.getBoundaries=p(function(){var e=b.getBoundingClientRect();return new l(e.top+d.y,d.y+e.top+e.height)},50);this.getHTML=function(){return b}},q=function(b){return b===
document.body||b.hasAttribute("data-sticky-context")?b:q(b.parentNode)},r=function(b){var e=document.createElement("div");b.parentNode.insertBefore(e,b);e.appendChild(b);return e};window.addEventListener("scroll",p(function(){d={x:window.pageXOffset,y:window.pageYOffset,dir:0<window.pageYOffset-d.y?"down":"up"};h=window.innerHeight;m.forEach(function(b){b.update(new l(d.y,d.y+h),d.dir)})}),!1);document.addEventListener("load",function(){d={x:window.pageXOffset,y:window.pageYOffset,dir:0<window.pageYOffset-
d.y?"down":"up"};h=window.innerHeight;m.forEach(function(b){b.update(new l(d.y,d.y+h),d.dir)})},!1);return{context:q,stick:function(b,e,k){e=new w(new n(e));b=r(b);b=new v(new n(b),new n(r(b)),e,k);b.update(new l(d.y,d.y+h),d.dir);return b}}});
