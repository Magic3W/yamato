depend("m3/depend/router",[],function(){function d(){this.rules=[];this.catchAll=void 0}function c(a){this.conditions=[a];this.target=void 0}function e(a){this.satisfiedBy=function(b){return 0===b.indexOf(a)}}function f(a){this.satisfiedBy=function(b){return b.lastIndexOf(a)+a.length===b.length}}function g(a){this.satisfiedBy=function(b){return a===b}}function l(){this.satisfiedBy=function(){return!0}}d.prototype={rewrite:function(a){for(var b in this.rules)if(this.rules[b].matches(a))return this.rules[b].rewrite(a);
return this.catchAll?this.catchAll.rewrite(a):null},startsWith:function(a){a=new c(new e(a));this.rules.push(a);return a},endsWith:function(a){a=new c(new f(a));this.rules.push(a);return a},equals:function(a){a=new c(new g(a));this.rules.push(a);return a},all:function(){var a=new c(new l);return this.catchAll=a}};c.prototype={to:function(a){this.target=a;return this},and:function(a){this.conditions.push(a);return this},matches:function(a){var b=!0,h;for(h in this.conditions)b=b&&this.conditions[h].satisfiedBy(a);
return b},rewrite:function(a){return this.target?this.target(a):null},rules:{starts:e,ends:f,equals:g}};var k=new d;window.depend.setRouter(function(a){return k.rewrite(a)});return k});
