var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(b,f,g){b instanceof String&&(b=String(b));for(var n=b.length,l=0;l<n;l++){var v=b[l];if(f.call(g,v,l,b))return{i:l,v:v}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,f,g){if(b==Array.prototype||b==Object.prototype)return b;b[f]=g.value;return b};$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var f=0;f<b.length;++f){var g=b[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,f){var g=$jscomp.propertyToPolyfillSymbol[f];if(null==g)return b[f];g=b[g];return void 0!==g?g:b[f]};
$jscomp.polyfill=function(b,f,g,n){f&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,f,g,n):$jscomp.polyfillUnisolated(b,f,g,n))};$jscomp.polyfillUnisolated=function(b,f,g,n){g=$jscomp.global;b=b.split(".");for(n=0;n<b.length-1;n++){var l=b[n];if(!(l in g))return;g=g[l]}b=b[b.length-1];n=g[b];f=f(n);f!=n&&null!=f&&$jscomp.defineProperty(g,b,{configurable:!0,writable:!0,value:f})};
$jscomp.polyfillIsolated=function(b,f,g,n){var l=b.split(".");b=1===l.length;n=l[0];n=!b&&n in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var v=0;v<l.length-1;v++){var w=l[v];if(!(w in n))return;n=n[w]}l=l[l.length-1];g=$jscomp.IS_SYMBOL_NATIVE&&"es6"===g?n[l]:null;f=f(g);null!=f&&(b?$jscomp.defineProperty($jscomp.polyfills,l,{configurable:!0,writable:!0,value:f}):f!==g&&($jscomp.propertyToPolyfillSymbol[l]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(l):$jscomp.POLYFILL_PREFIX+l,l=
$jscomp.propertyToPolyfillSymbol[l],$jscomp.defineProperty(n,l,{configurable:!0,writable:!0,value:f})))};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(f,g){return $jscomp.findInternal(this,f,g).v}},"es6","es3");if(void 0===HTMLElement)throw"Lysine requires a browser to work. HTMLElement class was not found";if(void 0===window)throw"Lysine requires a browser to work. Window variable was not found";
depend("m3/core/collection m3/core/delegate m3/core/parent m3/core/lysine/inputAdapter m3/core/lysine/selectAdapter m3/core/lysine/htmlAdapter m3/core/lysine/attributeAdapter".split(" "),function(b,f,g,n,l,v,w){function z(t){this.views=[];this.base=t;this.parentView=void 0;this.listeners=b([]);this.writeProtect=!1;this._setup=b([]);this._tearDown=b([]);this.getValue=function(){var h=[],d;this.views=this.views.filter(function(m){return!m.isDestroyed()});for(d=0;d<this.views.length;d+=1)h.push(this.views[d].getValue());
return h};this.setValue=function(h){if(!this.writeProtect){var d;if(void 0!==h){h=h.filter(function(a){return!!a});for(this.views=this.views.filter(function(a){return a.reset()&&!a.isDestroyed()});h.length<this.views.length;)this.views[h.length].destroy();this.views=this.views.slice(0,h.length);var m=this._tearDown;b(this.views).each(function(a){m.each(function(e){e(a)})});for(d=this.views.length;d<h.length;d+=1){var r=new x(this.base);this.views.push(r);r.setParent(this);this.listeners.each(function(a){r.on.apply(r,
a)})}m=this._setup;b(this.views).each(function(a){m.each(function(e){e(a)})});for(d=0;d<h.length;d++)this.views[d].setValue(h[d])}}};this.for=function(){return[this.base.getAttribute("data-for")]};this.on=function(h,d,m){this.listeners.push([h,d,m]);this.views.forEach(function(r){r.on(h,d,m)})};this.setUp=function(h){this._setup.push(h)};this.tearDown=function(h){this._tearDown.push(h)};this.parent=function(h){this.parentView=h;return this};this.push=function(h){var d=new x(this.base);this.views.push(d);
d.setValue(h);d.setParent(this);this.listeners.each(function(m){d.on.apply(d,m)});this.propagate();return d};this.refresh=function(){this.setValue(this.parentView.get(this.for()[0]))};this.propagate=function(){this.writeProtect=!0;this.parentView.set(this.for()[0],this.getValue());this.writeProtect=!1}}function A(t,h,d){var m=/([a-zA-Z_0-9]+)\(([a-zA-Z_0-9\-]+)\)\s?(==|!=)\s?(.+)/g.exec(t);if(null===m)throw"Malformed expression: "+t;var r=m[1],a=m[2],e=m[3],p=m[4],c=void 0,q=h.parentNode,u=h.nextSibling;
this.isVisible=function(){var k=void 0;switch(r){case "null":k=null===c.get(a)?"true":"false";break;case "bool":k=!0===c.get(a)?"true":"false";break;case "count":k=c.get(a)?c.get(a).length:0;break;case "value":k=c.get(a)}return"=="===e?k==p:k!=p};this.test=function(){var k=this.isVisible();k!==(h.parentNode===q)&&(k?q.insertBefore(h,u):q.removeChild(h))};this.for=function(){var k=b([]);d.each(function(y){k.merge(y.for())});k.push(a);return k.raw()};this.parent=function(k){c=k;d.each(function(y){y.parent(k)});
return this};this.refresh=function(){this.test();this.isVisible()&&d.each(function(k){k.refresh()})}}function x(t){var h=[],d={};this.destroyed=!1;this.parent=void 0;t=t instanceof HTMLElement?t:document.querySelector('*[data-lysine-view="'+t+'"]');this.set=function(a,e){if("^"===a.substr(0,1))return this.parent.parentView.set(a.substr(1),e);var p=d,c=a.split("."),q=c.pop();for(a=0;a<c.length;a++)p[c[a]]||(p[c[a]]={}),p=p[c[a]];p[q]=e;this.adapters.each(function(u){-1!==u.for().indexOf(c[0]||q)&&
u.refresh()});this.parent&&this.parent.propagate(this,d)};this.get=function(a){if("^"===a.substr(0,1))return this.parent.parentView.get(a.substr(1));var e=d;a=a.split(".");for(var p=0;p<a.length;p++)e=e?e[a[p]]:void 0;return e};this.setData=function(a){d=a;this.adapters.each(function(e){e.refresh()})};this.getData=function(){return d};this.reset=function(){for(var a=r.querySelectorAll("input"),e=0;e<a.length;e++)switch(a[e].type){case "checkbox":case "radio":a[e].checked=a[e].hasAttribute("checked");
default:a[e].value=a[e].hasAttribute("value")?a[e].getAttribute("value"):""}return!0};this.getValue=this.getData;this.setValue=this.setData;this.fetchAdapters=function(a){a=void 0!==a?a:r;var e=b([]),p=this;b(a.childNodes).each(function(c){var q=b([]);if(3!==c.nodeType){if(c.getAttribute&&c.getAttribute("data-for"))if(c.hasAttribute("data-lysine-view"))q.merge(b([(new z(c)).parent(p)]));else{var u=b([]).merge(n.find(c)).merge(l.find(c)).merge(v.find(c));q.merge(u.each(function(k){return k.parent(p)}))}else q.merge(p.fetchAdapters(c));
q.merge(w.find(c).each(function(k){return k.parent(p)}));c.getAttribute&&c.getAttribute("data-condition")?(c=new A(c.getAttribute("data-condition"),c,q),e.push(c.parent(p))):e.merge(q)}});return e};this.getElement=this.getHTML=function(){return r};this.destroy=function(){this.destroyed=!0;this.parent&&this.parent.propagate();r.parentNode.removeChild(r);b(h).each(function(a){document.removeEventListener(a[0],a[1])});return this};this.isDestroyed=function(){return this.destroyed};this.on=function(a,
e,p){var c=this,q=f(e,function(u){return g(u,function(k){return k===c.getHTML()})&&b(c.getHTML().querySelectorAll(a)).filter(function(k){return k===u}).raw()[0]},function(u,k){p.call(k,u,c)});h.push([e,q]);return q};this.sub=function(a){return this.adapters.filter(function(e){return-1===e.for().indexOf(a)?!1:!0}).get(0)};this.setParent=function(a){this.parent=a};this.find=function(a){return this.getHTML().querySelector(a)};this.findAll=function(a){return this.getHTML().querySelectorAll(a)};var m=
void 0;if(t.content)m=t.content.firstElementChild;else for(m=t.firstChild;m&&1!=m.nodeType;)m=m.nextSibling;var r=document.importNode(m,!0);this.adapters=this.fetchAdapters();t.parentNode.insertBefore(r,t)}return{view:x}});
