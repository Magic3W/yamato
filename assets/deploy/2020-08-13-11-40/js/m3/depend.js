(function(){function n(a,b,d){if(window.addEventListener&&a instanceof HTMLElement)return a.addEventListener(b,d,!1);if(window.attachEvent&&a instanceof HTMLElement)return a.attachEvent("on"+b,d);b="on"+b;var c=void 0!==a[b]?a[b]:null;a[b]=function(e){return!1!==d(e)&&(!c||c(e))}}function l(a){for(var b=0;b<k.length;b++)if(k[b].getName()===a)return k[b];return null}function p(a){for(var b=0;b<g.length;b++)if(g[b].getAttribute("data-src")===a)return g[b]}function t(a,b){var d=document.createElement("script");
d.src=a;d.async=!0;d.type="text/javascript";d.setAttribute("data-src",b);return d}function u(a,b){this.callable=void 0;this.load=function(){var d=this;if(l(b))l(b).onReady(function(){d.callable=this.getCallable();a.notify()});else{var c=q(b);if("function"===typeof c){c();var e=h;e.setName(b);h=null;e.onReady(function(){d.callable=e.getCallable();a.notify()})}else c=p(b)?p(b):t(c,b),n(c,"load",function(f){var m=h?h:l(f.target.getAttribute("data-src"));console.log(f.target.getAttribute("data-src"));
m.setName(f.target.getAttribute("data-src"));-1!==g.indexOf(this)&&(g.splice(g.indexOf(this),1),h=null);m.onReady(function(){d.callable=m.getCallable();a.notify()})}),n(c,"error",function(f){console.error("Error loading module "+f.target.getAttribute("data-src"));console.log("Dependency loading failed. Depending modules will not be initialized.");-1!==g.indexOf(this)&&(g.splice(g.indexOf(this),1),h=null)}),c.parentNode||(document.head.appendChild(c),g.push(c))}}}function v(a,b){var d=a.map(function(f){return new u(this,
f)},this),c=d.length,e=0;this.notify=function(){e++;e===c&&b(d.map(function(f){return f.callable}))};0===c&&b([]);for(a=0;a<c;a++)d[a].load()}function r(a,b,d){var c=this;this.name=a;this.body=void 0;this.resolved=!1;this.listeners=[];this.init=function(){new v(b,function(e){try{c.body=d.apply(null,e)}catch(f){console.log("Error initializing module "+this.name+". Error was: "),console.error(f)}c.resolved=!0;c.onReady()})};this.onReady=function(e){e&&this.listeners.push(e);if(this.resolved){for(e=
0;e<this.listeners.length;e++)this.listeners[e].call(this);this.listeners=[]}}}var k=[],g=[],h=null,q=function(a){return a+".js"};r.prototype={setName:function(a){this.name=a},getName:function(){return this.name},getCallable:function(){return this.body}};window.depend=function(a,b,d){d||"string"===typeof a||(d=b,b=a,a=null);"function"===typeof b&&(d=b,b=[]);var c=new r(a,b,d);k.push(c);h=a?null:c;setTimeout(function(){c.init()},0);return c};window.depend.setRouter=function(a){q=a};window.depend.moduleName=
function(a){h.setName(a);h=null}})();
